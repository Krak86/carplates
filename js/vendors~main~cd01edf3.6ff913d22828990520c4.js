(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{329:function(t,e,i){"use strict";var n=i(415),o=i(11),s=i(18),a=i(416),r=i(176),c=i(20),p=i(25),h=i(414),u=i(151),l=function(){},g=function(){function t(e,i){var n=this;o.a.isNullOrUndefined(i)?this._logger=new u.a:this._logger=i,e||(e={}),"function"!=typeof e.sessionExpirationMs&&(e.sessionExpirationMs=function(){return t.acquisitionSpan}),"function"!=typeof e.sessionRenewalMs&&(e.sessionRenewalMs=function(){return t.renewalSpan}),this.config=e,this._storageNamePrefix=function(){return n.config.namePrefix&&n.config.namePrefix()?t.cookieNameConst+n.config.namePrefix():t.cookieNameConst},this.automaticSession=new l}return t.prototype.update=function(){this.automaticSession.id||this.initializeAutomaticSession();var e=c.c.Now(),i=0!==this.config.sessionExpirationMs()&&e-this.automaticSession.acquisitionDate>this.config.sessionExpirationMs(),n=0!==this.config.sessionExpirationMs()&&e-this.automaticSession.renewalDate>this.config.sessionRenewalMs();i||n?this.renew():(!this.cookieUpdatedTimestamp||e-this.cookieUpdatedTimestamp>t.cookieUpdateInterval)&&(this.automaticSession.renewalDate=e,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate))},t.prototype.backup=function(){this.setStorage(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate)},t.prototype.initializeAutomaticSession=function(){var t=c.e.getCookie(this._logger,this._storageNamePrefix());if(t&&"function"==typeof t.split)this.initializeAutomaticSessionWithData(t);else{var e=c.e.getStorage(this._logger,this._storageNamePrefix());e&&this.initializeAutomaticSessionWithData(e)}this.automaticSession.id||this.renew()},t.prototype.initializeAutomaticSessionWithData=function(t){var e=t.split("|");e.length>0&&(this.automaticSession.id=e[0]);try{if(e.length>1){var i=+e[1];this.automaticSession.acquisitionDate=+new Date(i),this.automaticSession.acquisitionDate=this.automaticSession.acquisitionDate>0?this.automaticSession.acquisitionDate:0}if(e.length>2){var n=+e[2];this.automaticSession.renewalDate=+new Date(n),this.automaticSession.renewalDate=this.automaticSession.renewalDate>0?this.automaticSession.renewalDate:0}}catch(t){this._logger.throwInternal(s.a.CRITICAL,s.b.ErrorParsingAISessionCookie,"Error parsing ai_session cookie, session will be reset: "+c.e.getExceptionName(t),{exception:c.e.dump(t)})}0===this.automaticSession.renewalDate&&this._logger.throwInternal(s.a.WARNING,s.b.SessionRenewalDateIsZero,"AI session renewal date is 0, session will be reset.")},t.prototype.renew=function(){var t=c.c.Now();this.automaticSession.id=c.e.newId(),this.automaticSession.acquisitionDate=t,this.automaticSession.renewalDate=t,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate),c.e.canUseLocalStorage()||this._logger.throwInternal(s.a.WARNING,s.b.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")},t.prototype.setCookie=function(t,e,i){var n=e+this.config.sessionExpirationMs(),o=i+this.config.sessionRenewalMs(),s=new Date,a=[t,e,i];n<o?s.setTime(n):s.setTime(o);var r=this.config.cookieDomain?this.config.cookieDomain():null,p=0===this.config.sessionExpirationMs()?"0":s.toUTCString();c.e.setCookie(this._logger,this._storageNamePrefix(),a.join("|")+";expires="+p,r),this.cookieUpdatedTimestamp=c.c.Now()},t.prototype.setStorage=function(t,e,i){c.e.setStorage(this._logger,this._storageNamePrefix(),[t,e,i].join("|"))},t.acquisitionSpan=864e5,t.renewalSpan=18e5,t.cookieUpdateInterval=6e4,t.cookieNameConst="ai_session",t}(),d=i(144),f=function(){},x=function(){this.id="browser",this.deviceClass="Browser"},y="2.3.1",m=function(t){this.sdkVersion=(t.sdkExtension&&t.sdkExtension()?t.sdkExtension()+"_":"")+"javascript:"+y},I=function(){function t(e,i){this.isNewUser=!1,this._logger=i;var n=c.e.getCookie(this._logger,t.userCookieName);if(n){this.isNewUser=!1;var s=n.split(t.cookieSeparator);s.length>0&&(this.id=s[0])}if(this.config=e,!this.id){this.id=c.e.newId();var a=new Date,r=o.a.toISOString(a);this.accountAcquisitionDate=r,this.isNewUser=!0,a.setTime(a.getTime()+31536e6);var p=[this.id,r],h=this.config.cookieDomain?this.config.cookieDomain():void 0;c.e.setCookie(this._logger,t.userCookieName,p.join(t.cookieSeparator)+";expires="+a.toUTCString(),h);var u=e.namePrefix&&e.namePrefix()?e.namePrefix()+"ai_session":"ai_session";c.e.removeStorage(this._logger,u)}this.accountId=e.accountId?e.accountId():void 0;var l=c.e.getCookie(this._logger,t.authUserCookieName);if(l){var g=(l=decodeURI(l)).split(t.cookieSeparator);g[0]&&(this.authenticatedId=g[0]),g.length>1&&g[1]&&(this.accountId=g[1])}}return t.prototype.setAuthenticatedUserContext=function(e,i,n){if(void 0===n&&(n=!1),!this.validateUserInput(e)||i&&!this.validateUserInput(i))this._logger.throwInternal(s.a.WARNING,s.b.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);else{this.authenticatedId=e;var o=this.authenticatedId;i&&(this.accountId=i,o=[this.authenticatedId,this.accountId].join(t.cookieSeparator)),n&&c.e.setCookie(this._logger,t.authUserCookieName,encodeURI(o),this.config.cookieDomain())}},t.prototype.clearAuthenticatedUserContext=function(){this.authenticatedId=null,this.accountId=null,c.e.deleteCookie(this._logger,t.authUserCookieName)},t.prototype.validateUserInput=function(t){return!("string"!=typeof t||!t||t.match(/,|;|=| |\|/))},t.cookieSeparator="|",t.userCookieName="ai_user",t.authUserCookieName="ai_authUser",t}(),w=function(){},v=function(t,e,i){this.traceID=t||c.e.generateW3CId(),this.parentID=e,this.name=i,!i&&window&&window.location&&window.location.pathname&&(this.name=window.location.pathname)},S=function(){function t(t,e){"undefined"!=typeof window&&(this.sessionManager=new g(e,t),this.application=new f,this.device=new x,this.internal=new m(e),this.location=new w,this.user=new I(e,t),this.telemetryTrace=new v,this.session=new l),this.appId=function(){return null}}return t.prototype.applySessionContext=function(t){var e=this.session||this.sessionManager.automaticSession;e&&"string"==typeof e.id&&(t.ext.app.sesId=e.id),this.session&&("string"==typeof this.session.id?t.ext.app.sesId=this.session.id:t.ext.app.sesId=this.sessionManager.automaticSession.id)},t.prototype.applyOperatingSystemContxt=function(t){this.os&&this.os.name&&(t.ext.os=this.os)},t.prototype.applyApplicationContext=function(t){this.application&&("string"==typeof this.application.ver&&(t.tags[d.a.applicationVersion]=this.application.ver),"string"==typeof this.application.build&&(t.tags[d.a.applicationBuild]=this.application.build))},t.prototype.applyDeviceContext=function(t){this.device&&("string"==typeof this.device.id&&(t.ext.device.localId=this.device.id),"string"==typeof this.device.ip&&(t.ext.device.ip=this.device.ip),"string"==typeof this.device.model&&(t.ext.device.model=this.device.model),"string"==typeof this.device.deviceClass&&(t.ext.device.deviceClass=this.device.deviceClass))},t.prototype.applyInternalContext=function(t){this.internal&&("string"==typeof this.internal.agentVersion&&(t.tags[d.a.internalAgentVersion]=this.internal.agentVersion),"string"==typeof this.internal.sdkVersion&&(t.tags[d.a.internalSdkVersion]=this.internal.sdkVersion))},t.prototype.applyLocationContext=function(t){this.location&&"string"==typeof this.location.ip&&(t.tags[d.a.locationIp]=this.location.ip)},t.prototype.applyOperationContext=function(t){if(this.telemetryTrace){var e=t.ext.trace||{traceID:void 0,parentID:void 0};"string"==typeof this.telemetryTrace.traceID&&(e.traceID=this.telemetryTrace.traceID),"string"==typeof this.telemetryTrace.name&&(e.name=this.telemetryTrace.name),"string"==typeof this.telemetryTrace.parentID&&(e.parentID=this.telemetryTrace.parentID),t.ext.trace=e}},t.prototype.applyWebContext=function(t){this.web&&(t.ext.web=t.ext.web||{},t.ext.web=this.web)},t.prototype.applyUserContext=function(t){if(this.user){if(t.tags||(t.tags=[]),"string"==typeof this.user.accountId){t.tags[d.a.userAccountId]=this.user.accountId}"string"==typeof this.user.id&&(t.ext.user.id=this.user.id),"string"==typeof this.user.authenticatedId&&(t.ext.user.authId=this.user.authenticatedId)}},t.prototype.cleanUp=function(t){t.ext[d.b.DeviceExt]&&0===o.a.objKeys(t.ext[d.b.DeviceExt]).length&&delete t.ext[d.b.DeviceExt],t.ext[d.b.UserExt]&&0===o.a.objKeys(t.ext[d.b.UserExt]).length&&delete t.ext[d.b.UserExt],t.ext[d.b.WebExt]&&0===o.a.objKeys(t.ext[d.b.WebExt]).length&&delete t.ext[d.b.WebExt],t.ext[d.b.OSExt]&&0===o.a.objKeys(t.ext[d.b.OSExt]).length&&delete t.ext[d.b.OSExt],t.ext[d.b.AppExt]&&0===o.a.objKeys(t.ext[d.b.AppExt]).length&&delete t.ext[d.b.AppExt],t.ext[d.b.TraceExt]&&0===o.a.objKeys(t.ext[d.b.TraceExt]).length&&delete t.ext[d.b.TraceExt]},t}(),b=i(181),k=i(179),C=function(){function t(){this.priority=110,this.identifier=p.b}return t.getDefaultConfig=function(){return{instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){}}},t.prototype.initialize=function(e,i,n){var o=this,s=t.getDefaultConfig();this._extensionConfig=this._extensionConfig||t.getDefaultConfig();var a=function(t){r._extensionConfig[t]=function(){return b.a.getConfig(e,t,o.identifier,s[t]())}},r=this;for(var h in s)a(h);this._logger=i.logger,this.context=new S(i.logger,this._extensionConfig),this._breezeChannel=c.e.getExtension(n,p.a),this.context.appId=function(){return o._breezeChannel?o._breezeChannel._appId:null}},t.prototype.processTelemetry=function(t){if(o.a.isNullOrUndefined(t));else{if(t.name===k.a.envelopeType&&this._logger.resetInternalMessageCount(),this.context.session&&"string"!=typeof this.context.session.id&&this.context.sessionManager.update(),this._processTelemetryInternal(t),this.context&&this.context.user&&this.context.user.isNewUser){this.context.user.isNewUser=!1;var e=new u.b(s.b.SendBrowserInfoOnUserInit,navigator.userAgent);this._logger.logInternalMessage(s.a.CRITICAL,e)}o.a.isNullOrUndefined(this._nextPlugin)||this._nextPlugin.processTelemetry(t)}},t.prototype.setNextPlugin=function(t){this._nextPlugin=t},t.prototype._processTelemetryInternal=function(t){t.tags||(t.tags=[]),t.ext||(t.ext={}),t.ext[d.b.DeviceExt]=t.ext[d.b.DeviceExt]||{},t.ext[d.b.WebExt]=t.ext[d.b.WebExt]||{},t.ext[d.b.UserExt]=t.ext[d.b.UserExt]||{},t.ext[d.b.OSExt]=t.ext[d.b.OSExt]||{},t.ext[d.b.AppExt]=t.ext[d.b.AppExt]||{},t.ext[d.b.TraceExt]=t.ext[d.b.TraceExt]||{},this.context.applySessionContext(t),this.context.applyApplicationContext(t),this.context.applyDeviceContext(t),this.context.applyOperationContext(t),this.context.applyUserContext(t),this.context.applyOperatingSystemContxt(t),this.context.applyWebContext(t),this.context.applyLocationContext(t),this.context.applyInternalContext(t),this.context.cleanUp(t)},t}(),D=i(417);i.d(e,"a",(function(){return E}));var E=function(){function t(t){t.queue=t.queue||[],t.version=t.version||2;var e=t.config||{};if(e.connectionString){var i=r.a.parse(e.connectionString),o=i.ingestionendpoint;e.endpointUrl=o?o+"/v2/track":e.endpointUrl,e.instrumentationKey=i.instrumentationkey||e.instrumentationKey}this.appInsights=new a.a,this.properties=new C,this.dependencies=new D.a,this.core=new n.a,this.snippet=t,this.config=e,this.getSKUDefaults()}return t.prototype.trackEvent=function(t,e){this.appInsights.trackEvent(t,e)},t.prototype.trackPageView=function(t){var e=t||{};this.appInsights.trackPageView(e)},t.prototype.trackPageViewPerformance=function(t){var e=t||{};this.appInsights.trackPageViewPerformance(e)},t.prototype.trackException=function(t){!t.exception&&t.error&&(t.exception=t.error),this.appInsights.trackException(t)},t.prototype._onerror=function(t){this.appInsights._onerror(t)},t.prototype.trackTrace=function(t,e){this.appInsights.trackTrace(t,e)},t.prototype.trackMetric=function(t,e){this.appInsights.trackMetric(t,e)},t.prototype.startTrackPage=function(t){this.appInsights.startTrackPage(t)},t.prototype.stopTrackPage=function(t,e,i,n){this.appInsights.stopTrackPage(t,e,i,n)},t.prototype.startTrackEvent=function(t){this.appInsights.startTrackEvent(t)},t.prototype.stopTrackEvent=function(t,e,i){this.appInsights.stopTrackEvent(t,e,i)},t.prototype.addTelemetryInitializer=function(t){return this.appInsights.addTelemetryInitializer(t)},t.prototype.setAuthenticatedUserContext=function(t,e,i){void 0===i&&(i=!1),this.properties.context.user.setAuthenticatedUserContext(t,e,i)},t.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},t.prototype.trackDependencyData=function(t){this.dependencies.trackDependencyData(t)},t.prototype.flush=function(t){void 0===t&&(t=!0),o.a.arrForEach(this.core.getTransmissionControls(),(function(e){o.a.arrForEach(e,(function(e){e.flush(t)}))}))},t.prototype.onunloadFlush=function(t){void 0===t&&(t=!0),o.a.arrForEach(this.core.getTransmissionControls(),(function(e){o.a.arrForEach(e,(function(e){e.onunloadFlush?e.onunloadFlush():e.flush(t)}))}))},t.prototype.loadAppInsights=function(t){if(void 0===t&&(t=!1),t&&this.config.extensions&&this.config.extensions.length>0)throw new Error("Extensions not allowed in legacy mode");var e=[],i=new h.a;return e.push(i),e.push(this.properties),e.push(this.dependencies),e.push(this.appInsights),this.core.initialize(this.config,e),this.emptyQueue(),this.pollInternalLogs(),this.addHousekeepingBeforeUnload(this),this.context=this.properties.context,this},t.prototype.updateSnippetDefinitions=function(t){for(var e in this)"string"==typeof e&&(t[e]=this[e])},t.prototype.emptyQueue=function(){try{if(c.e.isArray(this.snippet.queue)){for(var t=this.snippet.queue.length,e=0;e<t;e++){(0,this.snippet.queue[e])()}this.snippet.queue=void 0,delete this.snippet.queue}}catch(t){t&&"function"==typeof t.toString&&t.toString()}},t.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},t.prototype.addHousekeepingBeforeUnload=function(t){if(!t.appInsights.config.disableFlushOnBeforeUnload&&"object"==typeof window&&"onbeforeunload"in window){c.e.addEventHandler("beforeunload",(function(){t.onunloadFlush(!1);var e=t.appInsights.core._extensions[p.b];e&&e.context&&e.context._sessionManager&&e.context._sessionManager.backup()}))||t.appInsights.core.logger.throwInternal(s.a.CRITICAL,s.b.FailedToAddHandlerForOnBeforeUnload,"Could not add handler for beforeunload")}},t.prototype.getSKUDefaults=function(){this.config.diagnosticLogInterval=this.config.diagnosticLogInterval&&this.config.diagnosticLogInterval>0?this.config.diagnosticLogInterval:1e4},t}()}}]);